<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>PrintLink App</title>

    <!-- React & Babel — MUST use defer to guarantee execution order -->
    <script defer src="https://unpkg.com/react/umd/react.development.js"></script>
    <script defer src="https://unpkg.com/react-dom/umd/react-dom.development.js"></script>
    <script defer src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Tailwind -->
    <script defer src="https://cdn.tailwindcss.com"></script>

    <!-- Firebase config (replace values below with YOUR actual config) -->
    <script>
      window.__firebase_config = {
        apiKey: "REPLACE_ME",
        authDomain: "REPLACE_ME.firebaseapp.com",
        projectId: "REPLACE_ME",
        storageBucket: "REPLACE_ME.appspot.com",
        messagingSenderId: "REPLACE_ME",
        appId: "REPLACE_ME"
      };
    </script>

    <!-- Firebase module loader -->
    <script type="module">
        import {
            initializeApp
        } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";

        import {
            getAuth,
            signInAnonymously,
            signInWithCustomToken,
            onAuthStateChanged,
            setPersistence,
            browserSessionPersistence
        } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

        import {
            getFirestore,
            collection,
            addDoc,
            onSnapshot,
            query,
            updateDoc,
            doc,
            serverTimestamp
        } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Expose everything to React app
        window.firebaseHelpers = {
            initializeApp,
            getAuth,
            signInAnonymously,
            signInWithCustomToken,
            onAuthStateChanged,
            setPersistence,
            browserSessionPersistence,
            getFirestore,
            collection,
            addDoc,
            onSnapshot,
            query,
            updateDoc,
            doc,
            serverTimestamp
        };

        console.log("Firebase helpers ready.");
    </script>
</head>

<body>
    <div id="root"></div>

    <!-- Your JSX — MUST be last and MUST use defer -->
    <script defer type="text/babel" src="./PrintLink.jsx"></script>
</body>
</html>
